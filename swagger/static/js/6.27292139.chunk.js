(this["webpackJsonpdashboard-v1"]=this["webpackJsonpdashboard-v1"]||[]).push([[6],{100:function(e,t,n){"use strict";n.d(t,"h",(function(){return f})),n.d(t,"k",(function(){return m})),n.d(t,"c",(function(){return g})),n.d(t,"m",(function(){return b})),n.d(t,"r",(function(){return w})),n.d(t,"i",(function(){return v})),n.d(t,"j",(function(){return h})),n.d(t,"e",(function(){return y})),n.d(t,"b",(function(){return k})),n.d(t,"a",(function(){return O})),n.d(t,"f",(function(){return j})),n.d(t,"p",(function(){return x})),n.d(t,"q",(function(){return _})),n.d(t,"g",(function(){return I})),n.d(t,"l",(function(){return S})),n.d(t,"d",(function(){return F})),n.d(t,"n",(function(){return E})),n.d(t,"o",(function(){return A}));var r=n(19),a=n.n(r),s=n(25),o=n(128),c=n(96),u=n(150),i=n(97),l=n(103),d=n(92),p=n(111);function f(e){return{type:o.h,payload:e}}function m(e){return{type:o.k,payload:e}}function g(){return{type:o.c}}function b(e){return{type:o.m,payload:e}}function w(e){return{type:o.p,payload:e}}function v(e){return{type:o.i,payload:e}}function h(e){return{type:o.j,payload:e}}function y(e){return{type:o.e,payload:e}}function k(e,t,n){return{type:o.b,payload:{data:n,id:e,position:t}}}function O(e,t){return{type:o.a,payload:{source:e,target:t}}}function j(e){return{type:o.f,payload:e}}function x(e,t){return{type:o.n,payload:{nodeId:e,nodeUpdate:t}}}function _(e,t){return{type:o.o,payload:{nodeId:e,nodeDataUpdate:t}}}function I(e){return{type:o.g,payload:e}}function S(e){return{type:o.l,payload:e}}function F(){return{type:o.d}}function E(e){return function(){var t=Object(s.a)(a.a.mark((function t(n){var r,s,o,u,f,m,g,b,v;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=i.a.getState().flowState.flows[e],o=null===(r=i.a.getState().flowState.workspaces[s.workspaceId])||void 0===r?void 0:r.flowArguments,void 0!==typeof s){t.next=4;break}return t.abrupt("return",n(Object(c.g)("Could not start flow","error")));case 4:return u=s.flowChart,f=Object(l.b)(u,o),d.a.log("startFlow","\n\tworkspaceId:",s.workspaceId,"\n\tflowId: ",e,"\n\tchart:",u,"\n\tyaml:",f),t.next=9,p.a.startFlow(f);case 9:if(m=t.sent,g=m.status,b=m.message,v=m.flow_id,d.a.log("startFlow result",m),"error"!==g){t.next=14;break}return t.abrupt("return",n(Object(c.g)(b,"error")));case 14:n(w({daemon_id:v})),n(Object(c.g)(b,"success")),n(C(e));case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function A(e){return function(){var t=Object(s.a)(a.a.mark((function t(n){var r,s,o,u,l;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=i.a.getState().flowState.flows[e],d.a.log("stopFlow: ",e),void 0!==typeof r){t.next=4;break}return t.abrupt("return",n(Object(c.g)("Could not stop flow","error")));case 4:if(s=r.daemon_id,d.a.log("flow:",r),d.a.log("daemon_id:",s),s){t.next=9;break}return t.abrupt("return",n(Object(c.g)("Flow is not deployed","error")));case 9:return t.next=11,p.a.terminateFlow(s);case 11:if(o=t.sent,u=o.status,l=o.message,d.a.log("stopFlow result: ",o),"error"!==u){t.next=16;break}return t.abrupt("return",n(Object(c.g)(l,"error")));case 16:n(Object(c.g)(l,"success"));case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function C(e){return function(){var t=Object(s.a)(a.a.mark((function t(n){var r,s,l,f;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=i.a.getState().flowState.flows[e],s=r.daemon_id){t.next=4;break}return t.abrupt("return",n(Object(c.g)("Could not initialize flow","error")));case 4:return t.next=6,p.a.getFlow(s);case 6:if(l=t.sent,d.a.log("got network flow:",l),"error"!==l.status){t.next=11;break}return l.message&&n(Object(c.g)(l.message,"error")),t.abrupt("return");case 11:f=l.flow.workspace_id,n((a={daemon_id:f},{type:o.q,payload:a})),setTimeout((function(){return n(Object(u.a)(f,s))}),5e3);case 14:case"end":return t.stop()}var a}),t)})));return function(e){return t.apply(this,arguments)}}()}},103:function(e,t,n){"use strict";n.d(t,"g",(function(){return a})),n.d(t,"i",(function(){return o})),n.d(t,"h",(function(){return s})),n.d(t,"d",(function(){return c.c})),n.d(t,"j",(function(){return l})),n.d(t,"c",(function(){return d.c})),n.d(t,"e",(function(){return d.d})),n.d(t,"b",(function(){return d.b})),n.d(t,"f",(function(){return d.f})),n.d(t,"a",(function(){return p.a}));var r=function(e){return new Blob([e],{type:"text,plain;charset=utf-8"})},a=function(e){return r(function(e){return e.reduce((function(e,t){return e+"".concat(t.uptime,',"').concat(t.formattedTimestamp,'",').concat(t.name,",").concat(t.process,",").concat(t.level,',"').concat(t.message,'",').concat(t.context,",").concat(t.host,",").concat(t.workspace_path,"\n")}),"created,formatted timestamp,name,process,level name,message,context,host,workspace\n")}(e))},s=function(e){return r(function(e){var t=e.reduce((function(t,n,r){return t+(JSON.stringify(n)+"".concat(r<e.length-1?",":"","\n"))}),"\n");return"[".concat(t,"]")}(e))},o=function(e){return r(function(e){return e.reduce((function(e,t){return e+"".concat(t.formattedTimestamp," ").concat(t.name,"@").concat(t.process," [").concat(t.level,"]: ").concat(t.message,"\n")}),"")}(e))},c=n(110),u=n(83),i=n(29);function l(e,t){var n=e.uptime,r=e.type,a=Object(i.a)(),s=new Date(n),o=Math.floor(s.valueOf()/1e3),c=s.toLocaleString();return Object(u.a)(Object(u.a)({},e),{},{id:a,idx:t,unixTime:o,timestamp:s,formattedTimestamp:c,level:r})}var d=n(98),p=n(28)},108:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(3),a=(n(1),n(81)),s=n.n(a),o=n(392);function c(e){var t=e.title,n=e.subtitle,a=e.className,c=s()(a,"text-center","text-md-left","mb-sm-0");return Object(r.jsxs)(o.a,{xs:"12",sm:"3",className:c,children:[Object(r.jsx)("h3",{className:"page-title","data-name":"title",children:t}),Object(r.jsx)("p",{className:"page-subtitle mt-2 mb-0",children:n})]})}},110:function(e,t,n){"use strict";n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return u})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return d}));var r=n(26),a=n(83),s=n(117),o=n(183),c=s.f,u=s.g,i=function(e,t,n){return{id:e,type:"gateway"===e?"gateway":"pod",data:t,position:n}},l=function(e,t){return{id:"e-".concat(e,"-to-").concat(t),source:e,target:t,type:"step"}},d=function(e){var t,n,r,s,c=e.pods,u=null===(t=e.with)||void 0===t||null===(n=t.board)||void 0===n?void 0:n.canvas,d={with:e.with},f=[],m=[];if(null===(r=e.version)||void 0===r?void 0:r.includes("1")){var g={};c.forEach((function(e){var t=e.name;delete e.name,g[t]=Object(a.a)({},e)})),c=g}c.gateway||(c=Object(a.a)({gateway:null},c)),Object.keys(c).forEach((function(e){var t,n=c[e]||{},r=i(e,n,{});if(r.data.label=e,r.data.name=e,s&&!r.data.needs&&"gateway"!==e&&(!r.data.needs&&(r.data.needs=[]),r.data.needs.push(s)),(null===r||void 0===r||null===(t=r.data)||void 0===t?void 0:t.needs)&&r.data.needs.forEach((function(t){return m.push(l(t,e))})),u&&u[e]){var a=u[e],o=a.x,d=a.y;r.position={x:parseInt(o),y:parseInt(d)}}f.push(r),s=e}));var b={},w=o.nodeOffset.x,v=o.nodeOffset.y;return f.forEach((function(e){var t=p(f,e);e.data.depth=t,void 0===b[t]?b[t]=1:b[t]=b[t]+1,e.position.x||(e.position={y:t*v+v,x:b[t]*w})})),d.elements=[].concat(f,m),d};function p(e,t){var n=t.data.needs;if(n&&0!==n.length){var a=n.map((function(t){var n=e.find((function(e){return e.id===t}));return n.data.depth?n.data.depth:p(e,n)}));return Math.max.apply(Math,Object(r.a)(a))+1}return 0}},111:function(e,t,n){"use strict";var r=n(9),a=n(19),s=n.n(a),o=n(25),c=n(116),u=n.n(c),i=n(28),l=n(92),d=n(149),p=u.a.create(),f={connect:function(){var e=Object(o.a)(s.a.mark((function e(t,n){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.a.log("api - connect - settings",t),r="".concat(t.jinadHost,":").concat(t.jinadPort),p=u.a.create({baseURL:r,timeout:d.c}),e.prev=3,e.next=6,p.get("/");case 6:if(200!==e.sent.status){e.next=10;break}return l.a.log("api - connect successfully connected to jinad"),e.abrupt("return",n({connected:!0,message:"Successfully connected to Jina at ".concat(r)}));case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),l.a.log("api - connect could not connect to jinad:",e.t0);case 15:return e.abrupt("return",n({connected:!1,message:"failed to connect"}));case 16:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t,n){return e.apply(this,arguments)}}(),getJinaFlowArguments:function(){var e=Object(o.a)(s.a.mark((function e(){var t,n,r,a,o,c,u,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.get("/status");case 2:return t=e.sent,n=t.data.jina.jina,e.next=6,p.get("/flows/arguments");case 6:return r=e.sent,a=g(r.data),e.next=10,p.get("/pods/arguments");case 10:return o=e.sent,c=g(o.data),e.next=14,p.get("/peas/arguments");case 14:return u=e.sent,i=g(u.data),e.abrupt("return",{version:n,flow:a,pod:c,pea:i});case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getDaemonStatus:function(){var e=Object(o.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.get("/status");case 3:if(200!==(t=e.sent).status){e.next=6;break}return e.abrupt("return",{status:"success",daemonStatus:t.data});case 6:return e.abrupt("return",{status:"error",message:t.data});case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",{status:"error",message:e.t0});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),getWorkspaces:function(){var e=Object(o.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.get("/workspaces");case 3:if(200!==(t=e.sent).status){e.next=6;break}return e.abrupt("return",{status:"success",workspaces:t.data});case 6:return e.abrupt("return",{status:"error",message:t.data});case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",{status:"error",message:e.t0});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),createWorkspace:function(){var e=Object(o.a)(s.a.mark((function e(t){var n,r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new FormData,t.forEach((function(e){"string"===typeof e?n.append("files",new Blob([e])):n.append("files",e)})),r={headers:{"Content-Type":"multipart/form-data"}},e.prev=3,e.next=6,p.post("/workspaces",n,r);case 6:if(201!==(a=e.sent).status){e.next=9;break}return e.abrupt("return",{status:"success",workspace:a.data});case 9:return e.abrupt("return",{status:"error",message:a.data});case 12:return e.prev=12,e.t0=e.catch(3),e.abrupt("return",{status:"error",message:e.t0});case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}(),deleteWorkspace:function(){var e=Object(o.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.delete("/workspaces/".concat(t));case 3:if(200!==(n=e.sent).status){e.next=6;break}return e.abrupt("return",{status:"success",message:n.data});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),l.a.log("api - deleteWorkspace ".concat(t," error: "),e.t0);case 11:return e.abrupt("return",{status:"error"});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),deleteAllWorkspaces:function(){var e=Object(o.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.delete("/workspaces/all");case 3:if(200!==(t=e.sent).status){e.next=6;break}return e.abrupt("return",{status:"success",message:t.data});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),l.a.log("api - deleteAllWorkspaces error: ",e.t0);case 11:return e.abrupt("return",{status:"error"});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),getArgumentsForFlow:function(){var e=Object(o.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.get("/flows/arguments");case 3:if(200!==(t=e.sent).status){e.next=6;break}return e.abrupt("return",{status:"success",arguments:t.data});case 6:return e.abrupt("return",{status:"error",message:t.data});case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",{status:"error",message:e.t0});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),getFlow:function(){var e=Object(o.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.get("/flows/".concat(t));case 3:if(200!==(n=e.sent).status){e.next=6;break}return e.abrupt("return",{status:"success",flow:n.data});case 6:return e.abrupt("return",{status:"error",message:n.data});case 9:e.prev=9,e.t0=e.catch(0),l.a.log("api - getFlow error getting flow: ",e.t0);case 12:return e.abrupt("return",{status:"error",message:"Could not get flow\nFlowId:".concat(t)});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),startFlow:function(){var e=Object(o.a)(s.a.mark((function e(t,n){var r,a,o,c,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.a.log("yamlString:",t),(r=new FormData).append("flow",new Blob([t])),n&&r.append("workspace_id",n),a={headers:{"Content-Type":"multipart/form-data"}},e.prev=5,e.next=8,p.post("/flows",r,a);case 8:if(201!==(o=e.sent).status){e.next=13;break}return c=o.data,u="Successfuly started flow\nid: ".concat(c),e.abrupt("return",{status:"success",message:u,flow_id:c});case 13:return e.abrupt("return",{status:"error",message:o.data});case 16:return e.prev=16,e.t0=e.catch(5),l.a.log("api - startFlow error: ",e.t0),e.abrupt("return",{status:"error",message:e.t0.message});case 20:case"end":return e.stop()}}),e,null,[[5,16]])})));return function(t,n){return e.apply(this,arguments)}}(),terminateFlow:function(){var e=Object(o.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.delete("/flows/".concat(t));case 3:if(n=e.sent,l.a.log("terminate result",n),200!==n.status){e.next=8;break}return r="Successfuly terminated flow ".concat(t),e.abrupt("return",{status:"success",message:r,flow:n.data});case 8:return e.abrupt("return",{status:"error",message:n.data});case 11:return e.prev=11,e.t0=e.catch(0),l.a.log("api - terminateFlow error: ",e.t0),e.abrupt("return",{status:"error",message:e.t0.message});case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),terminateAllFlows:function(){var e=Object(o.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.delete("/flows/all");case 3:if(200!==(t=e.sent).status){e.next=6;break}return e.abrupt("return",{status:"success",message:t.data});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),l.a.log("api - terminateAllFlows error: ",e.t0);case 11:return e.abrupt("return",{status:"error"});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),getLogs:function(){var e=Object(o.a)(s.a.mark((function e(t,n){var r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.get("/logs/".concat(t,"/").concat(n));case 3:if(200!==(r=e.sent).status){e.next=7;break}return a=r.data.split("\n").filter((function(e){return""!==e})).map(JSON.parse),e.abrupt("return",{status:"success",logs:a});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),l.a.log("api - getLogs error: ",e.t0);case 12:return e.abrupt("return",{status:"error",message:"Could not get logs for flow.\nFlowId:".concat(n)});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),waitForFlow:function(){var e=Object(o.a)(s.a.mark((function e(t,n){var r,a,o,c=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=c.length>2&&void 0!==c[2]?c[2]:d.a,a=c.length>3&&void 0!==c[3]?c[3]:d.b,o=0;case 3:if(!(o<r)){e.next=21;break}return l.a.log("checking for flow logs [".concat(o+1,"]")),e.prev=5,e.next=8,p.get("/logs/".concat(t,"/").concat(n));case 8:if(200!==e.sent.status){e.next=11;break}return e.abrupt("return",{status:"success",message:"Successfuly stablished logstream.\nFlowId:".concat(n)});case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),l.a.log("no flow logs yet [".concat(o+1,"]"));case 16:return e.next=18,Object(i.g)(a);case 18:++o,e.next=3;break;case 21:return e.abrupt("return",{status:"error",message:"Could not establish log stream for flow.\nFlowId:".concat(n)});case 22:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t,n){return e.apply(this,arguments)}}(),listenForLogs:function(){var e=Object(o.a)(s.a.mark((function e(t,n,r,a,o){var c,u,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=r.jinadHost.replace("http://","ws://").replace("https://","wss://"),u="".concat(c,":").concat(r.jinadPort,"/logstream/").concat(t,"/").concat(n),l.a.log("api - listenForLogs - baseURl:",u),e.prev=3,i=new WebSocket(u),e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(3),e.abrupt("return",a({connected:!1,message:e.t0}));case 10:i.addEventListener("open",(function(){a({connected:!0,message:"Successfully Connected"}),i.send(JSON.stringify({from:0}))})),i.addEventListener("message",(function(e){l.a.log("api - logstream - message received: ",e);var t=JSON.parse(e.data);o(t)})),i.addEventListener("close",(function(e){a({connected:!1,message:"Connection closed"})})),i.addEventListener("error",(function(e){a({connected:!1,message:"Socket error"})}));case 14:case"end":return e.stop()}}),e,null,[[3,7]])})));return function(t,n,r,a,s){return e.apply(this,arguments)}}(),getArgumentsForPod:function(){var e=Object(o.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.get("/pods/arguments");case 3:if(200!==(t=e.sent).status){e.next=6;break}return e.abrupt("return",{status:"success",arguments:t.data});case 6:return e.abrupt("return",{status:"error",message:t.data});case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",{status:"error",message:e.t0});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),getPod:function(){var e=Object(o.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.get("/pods/".concat(t));case 3:if(200!==(n=e.sent).status){e.next=6;break}return e.abrupt("return",{status:"success",pod:n.data});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),l.a.log("api - getPod ".concat(t," error: "),e.t0);case 11:return e.abrupt("return",{status:"error"});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),startPod:function(){var e=Object(o.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.post("/pods",t);case 3:if(201!==(n=e.sent).status){e.next=6;break}return e.abrupt("return",{status:"success",pod:n.data});case 6:return e.abrupt("return",{status:"error",message:n.data});case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",{status:"error",message:e.t0});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),terminatePod:function(){var e=Object(o.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.delete("/pods/".concat(t));case 3:if(200!==(n=e.sent).status){e.next=6;break}return e.abrupt("return",{status:"success",message:n.data});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),l.a.log("api - terminatePod ".concat(t," error: "),e.t0);case 11:return e.abrupt("return",{status:"error"});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),terminateAllPods:function(){var e=Object(o.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.delete("/pods/all");case 3:if(200!==(t=e.sent).status){e.next=6;break}return e.abrupt("return",{status:"success",message:t.data});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),l.a.log("api - terminateAllPods error: ",e.t0);case 11:return e.abrupt("return",{status:"error"});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),getArgumentsForPea:function(){var e=Object(o.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.get("/peas/arguments");case 3:if(200!==(t=e.sent).status){e.next=6;break}return e.abrupt("return",{status:"success",arguments:t.data});case 6:return e.abrupt("return",{status:"error",message:t.data});case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",{status:"error",message:e.t0});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),getPea:function(){var e=Object(o.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.get("/peas/".concat(t));case 3:if(200!==(n=e.sent).status){e.next=6;break}return e.abrupt("return",{status:"success",pea:n.data});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),l.a.log("api - getPea error getting pea ".concat(t,": "),e.t0);case 11:return e.abrupt("return",{status:"error"});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),startPea:function(){var e=Object(o.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.post("/peas",t);case 3:if(201!==(n=e.sent).status){e.next=6;break}return e.abrupt("return",{status:"success",pea:n.data});case 6:return e.abrupt("return",{status:"error",message:n.data});case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",{status:"error",message:e.t0});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),terminatePea:function(){var e=Object(o.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.delete("/peas/".concat(t));case 3:if(200!==(n=e.sent).status){e.next=6;break}return e.abrupt("return",{status:"success",message:n.data});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),l.a.log("api - terminatePea ".concat(t," error: "),e.t0);case 11:return e.abrupt("return",{status:"error"});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),terminateAllPeas:function(){var e=Object(o.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.delete("/peas/all");case 3:if(200!==(t=e.sent).status){e.next=6;break}return e.abrupt("return",{status:"success",message:t.data});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),l.a.log("api - terminateAllPeas error: ",e.t0);case 11:return e.abrupt("return",{status:"error"});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()},m={string:"string",boolean:"boolean",integer:"integer",array:"string"},g=function(e){return Object.entries(e).map((function(e){var t=Object(r.a)(e,2),n=t[0],a=t[1],s=a.description,o=a.default,c=a.type,u=m[c];return"undefined"===typeof o||null===o?{name:n,description:s,type:u}:{name:n,description:s,defaultValue:o,type:u}}))};t.a=f},115:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return s})),n.d(t,"c",(function(){return o}));var r="SHOW_LOG_INDEX",a="HANDLE_NEW_LOG",s={logIndex:0,logLevelOccurrences:{},logs:[],logLevels:{INFO:0,SUCCESS:0,WARNING:0,ERROR:0,CRITICAL:0,DEBUG:0},logSources:{}},o=function(){return{lastLog:0,levels:{INFO:0,SUCCESS:0,WARNING:0,ERROR:0,CRITICAL:0,DEBUG:0}}}},128:function(e,t,n){"use strict";n.d(t,"k",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"p",(function(){return s})),n.d(t,"i",(function(){return o})),n.d(t,"b",(function(){return c})),n.d(t,"e",(function(){return u})),n.d(t,"n",(function(){return i})),n.d(t,"o",(function(){return l})),n.d(t,"g",(function(){return d})),n.d(t,"a",(function(){return p})),n.d(t,"f",(function(){return f})),n.d(t,"j",(function(){return m})),n.d(t,"m",(function(){return g})),n.d(t,"l",(function(){return b})),n.d(t,"d",(function(){return w})),n.d(t,"q",(function(){return v})),n.d(t,"h",(function(){return h})),n.d(t,"x",(function(){return y})),n.d(t,"v",(function(){return O})),n.d(t,"u",(function(){return j})),n.d(t,"s",(function(){return x})),n.d(t,"r",(function(){return _})),n.d(t,"t",(function(){return I})),n.d(t,"w",(function(){return S}));var r="LOAD_FLOW",a="CREATE_NEW_FLOW",s="UPDATE_SELECTED_FLOW",o="DUPLICATE_FLOW",c="ADD_NODE",u="DELETE_FLOW",i="UPDATE_NODE",l="UPDATE_NODE_DATA",d="DELETE_NODE",p="ADD_LINK",f="DELETE_LINK",m="IMPORT_FLOW",g="SET_FLOW_ARGUMENTS",b="LOAD_WORKSPACE",w="CREATE_NEW_WORKSPACE",v="UPDATE_SELECTED_WORKSPACE",h="DELETE_WORKSPACE",y={elements:[{id:"gateway",type:"gateway",data:{name:"gateway",label:"gateway"},position:{x:629,y:72}}]},k="_userWorkspace",O="_userFlow",j="1",x={version:"0.0",flow:[],pea:[],pod:[]},_={_userFlow:{name:"Custom Flow 1",workspaceId:k,type:"user-generated",flowChart:y,isConnected:!1,daemon_id:null}},I={_userFlow:{name:"Custom Flow 1",workspaceId:k,type:"user-generated",flowChart:y,isConnected:!1,daemon_id:null}},S={_userWorkspace:{name:"Workspace 1",jina_version:"latest",type:"user-generated",daemon_endpoint:"",isConnected:!1,daemon_id:"",files:[],selectedFlowId:O,flowArguments:x}}},129:function(e,t,n){"use strict";var r=n(79),a=n(80),s=n(72);function o(){var e=Object(r.a)(["\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]);return o=function(){return e},e}function c(){var e=Object(r.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 48px;\n  width: 48px;\n  background: transparent;\n  border-radius: 50%;\n  animation: "," 1s infinite ease-in-out;\n"]);return c=function(){return e},e}function u(){var e=Object(r.a)(["\n  50%{\n    border-color: transparent;\n  }\n  100%{\n    transform:rotatez(360deg);\n  }\n"]);return u=function(){return e},e}function i(){var e=Object(r.a)(["\n  position: absolute;\n  height: 32px;\n  width: 32px;\n  animation: "," 1s infinite ease-in;\n"]);return i=function(){return e},e}function l(){var e=Object(r.a)(["\n  border-radius: 50%;\n  border: 8px solid white;\n  border-color: ",";\n"]);return l=function(){return e},e}function d(){var e=Object(r.a)(["\n  100%{\n    transform:rotatez(-720deg);\n  }\n"]);return d=function(){return e},e}var p=Object(s.d)(d()),f=a.a.div(l(),(function(e){var t=e.theme.palette.primary.main,n=e.theme.palette.background.default;return"".concat(t," ").concat(n," ").concat(t," ").concat(n)})),m=Object(a.a)(f)(i(),p),g=Object(s.d)(u()),b=Object(a.a)(f)(c(),g),w=a.a.div(o());t.a=function(){return Object(s.c)(w,null,Object(s.c)(b,null,Object(s.c)(m,null)))}},138:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"d",(function(){return a})),n.d(t,"c",(function(){return s})),n.d(t,"e",(function(){return o})),n.d(t,"a",(function(){return c})),n.d(t,"f",(function(){return u})),n.d(t,"g",(function(){return i}));var r="FETCH_HUB_IMAGES",a="FETCH_HUB_IMAGES_SUCCESS",s="FETCH_HUB_IMAGES_FAILURE",o="PICK_FILTER",c="CLEAR_FILTERS",u={images:[],loading:!1,error:null,selectedFilters:[]},i=["name increasing","name decreasing","author increasing","author decreasing"]},142:function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"l",(function(){return a})),n.d(t,"i",(function(){return s})),n.d(t,"e",(function(){return o})),n.d(t,"j",(function(){return c})),n.d(t,"k",(function(){return u})),n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return d})),n.d(t,"g",(function(){return p})),n.d(t,"h",(function(){return f})),n.d(t,"f",(function(){return m})),n.d(t,"m",(function(){return b}));var r="HANDLE_CONNECTION_STATUS",a="TOGGLE_SIDE_BAR",s="SHOW_BANNER",o="HIDE_BANNER",c="SHOW_ERROR",u="SHOW_MODAL",i="CLOSE_MODAL",l="FETCH_ARGUMENTS_FROM_API",d="FETCH_ARGUMENTS_FROM_DAEMON",p="LOGOUT",f="SETUSER",m=5e3,g=[{title:"Home",to:"/home",iconName:"home",matches:["home"]},{title:"Log Stream",to:"/logs",iconName:"insert_comment",matches:["logs"]},{title:"Flow Design",to:"/flow",iconName:"device_hub",matches:["flow"]},{title:"Hub",to:"/hub",iconName:"store",matches:["hub","package"]},{title:"Debug",to:"/debug",iconName:"pest_control",matches:["debug"]},{title:"Settings",to:"/settings",iconName:"settings",matches:["settings"]},{title:"Help",to:"/help",iconName:"help",matches:["help"]}];function b(){var e=null,t=localStorage.getItem("user");return t&&(e=JSON.parse(t)),{user:e,banners:[],connected:!1,currentTab:"logStream",loading:!0,menuVisible:!1,modal:null,modalParams:null,navItems:g,processes:{}}}},148:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var r="UPDATE_SETTINGS",a={settings:{jinadHost:localStorage.getItem("preferences-jinadhost")||"http://localhost",jinadPort:localStorage.getItem("preferences-jinadPort")||"5000",gatewayHost:localStorage.getItem("preferences-gatewayHost")||"http://localhost",gatewayPort:localStorage.getItem("preferences-gatewayPort")||"5555",log:localStorage.getItem("preferences-log")||"/stream/log",profile:localStorage.getItem("preferences-profile")||"/stream/profile",yaml:localStorage.getItem("preferences-yaml")||"/data/yaml",shutdown:localStorage.getItem("preferences-shutdown")||"/action/shutdown",ready:localStorage.getItem("preferences-ready")||"/status/ready"}}},149:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s}));var r=4e4,a=10,s=3e3},150:function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return f}));var r=n(19),a=n.n(r),s=n(25),o=n(115),c=n(97),u=n(96),i=n(92),l=n(111);function d(e){return{type:o.b,payload:e}}function p(e){return{type:o.a,payload:e}}function f(e,t){return function(){var n=Object(s.a)(a.a.mark((function n(r){var s,o,d,f,m,g;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return f=function(e){r(p(e))},s=function(e){var t=e.connected,n=e.message;if(!t)return r(Object(u.g)(n,"error"))},n.next=4,l.a.waitForFlow(e,t);case 4:if("error"!==(o=n.sent).status){n.next=7;break}return n.abrupt("return",r(Object(u.g)(o.message,"error")));case 7:return n.next=9,l.a.getLogs(e,t);case 9:if("error"!==(d=n.sent).status){n.next=13;break}return d.message&&r(Object(u.g)(d.message,"error")),n.abrupt("return");case 13:m=d.logs,i.a.log("got logs:",m),m.forEach(f),g=c.a.getState().settingsState.settings,l.a.listenForLogs(e,t,g,s,f);case 18:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}},183:function(e,t,n){"use strict";n.r(t),n.d(t,"nodeOffset",(function(){return r}));var r={x:250,y:150}},209:function(e,t,n){},210:function(e,t,n){},214:function(e,t,n){"use strict";var r=n(3),a=(n(1),n(81)),s=n.n(a),o=n(90),c=function(e){var t=e.toggleSidebar;return Object(r.jsx)("div",{className:"main-navbar",children:Object(r.jsxs)(o.n,{className:"align-items-stretch bg-white flex-md-nowrap p-0",type:"light",children:[Object(r.jsx)(o.o,{className:"w-100 mr-0",href:"#",style:{lineHeight:"25px"},children:Object(r.jsx)("div",{className:"d-table m-auto",children:Object(r.jsx)("img",{id:"main-logo",className:"d-inline-block align-top",style:{maxWidth:"50px"},src:"/jina-light.svg",alt:"Jina Dashboard"})})}),Object(r.jsx)("span",{className:"toggle-sidebar d-sm-inline d-md-none d-lg-none",onClick:t,children:Object(r.jsx)("i",{className:"material-icons",children:"\ue5c4"})})]})})},u=n(112),i=n(102),l=function(e){var t,n,a=e.item,s=e.toggleSidebar,c=null===(t=Object(u.h)())||void 0===t||null===(n=t.pathname)||void 0===n?void 0:n.substring(1),l=!1;return a.matches.forEach((function(e){c===e&&(l=!0)})),Object(r.jsx)(o.l,{style:{position:"relative"},children:Object(r.jsxs)(o.m,{tag:i.d,to:a.to,active:l,onClick:s,children:[a.iconName&&Object(r.jsx)("div",{className:"d-inline-block item-icon-wrapper",children:Object(r.jsx)("i",{className:"material-icons",children:a.iconName})}),a.title&&Object(r.jsx)("span",{children:a.title})]})})},d=function(e){var t=e.navItems,n=e.toggleSidebar;return Object(r.jsx)("div",{className:"nav-wrapper",children:"undefined"!==typeof t&&t.length&&Object(r.jsx)(o.k,{className:"nav--no-borders flex-column",children:t.map((function(e,t){return Object(r.jsx)(l,{item:e,toggleSidebar:n},t)}))})})};t.a=function(e){var t=e.menuVisible,n=e.sidebarNavItems,a=e.toggleSidebar,u=s()("main-sidebar","px-0","col-12",t&&"open");return Object(r.jsxs)(o.f,{tag:"aside",className:u,lg:{size:2},md:{size:3},children:[Object(r.jsx)(c,{toggleSidebar:a}),Object(r.jsx)(d,{navItems:n,toggleSidebar:a})]})}},47:function(e,t,n){"use strict";n.r(t),n.d(t,"initSentry",(function(){return s}));var r=n(1401),a=n(242);function s(){r.a({dsn:"https://085edd94ec3e479cb20f2c65f7b8cb82@o525420.ingest.sentry.io/5639443",integrations:[new a.a.BrowserTracing],tracesSampleRate:1})}},54:function(e,t,n){"use strict";n.r(t);var r=n(3),a=n(79),s=(n(1),n(102)),o=n(112),c=n(80),u=n(214),i=n(9),l=n(72),d=n(108),p=n(22);function f(){var e=Object(a.a)(["\n                    background-color: ",";\n                    color: ",";\n                    padding: 8px;\n                    border-radius: 8px;\n                  "]);return f=function(){return e},e}function m(){var e=Object(a.a)(["\n                  padding: 32px;\n                  background-color: ",";\n                "]);return m=function(){return e},e}var g=function(){var e=p.a.palette,t=["primary","secondary","background","action","text","error","warning","success","info","grey"],n=Object.entries(e).filter((function(e){var n=Object(i.a)(e,2),r=n[0];n[1];return t.includes(r)}));return Object(l.c)("div",null,Object(l.c)(d.a,{title:"Colors",className:""}),n.map((function(t){var n=Object(i.a)(t,2),r=n[0],a=n[1];return Object(l.c)("div",null,Object(l.c)("h3",null,r),Object.entries(a).map((function(t){var n=Object(i.a)(t,2),r=n[0],a=n[1];return Object(l.c)("div",{key:a,css:Object(l.b)(m(),a)},Object(l.c)("span",{css:Object(l.b)(f(),e.grey[400],e.text.primary)},r))})))})))},b=n(46),w=n(129);function v(){var e=Object(a.a)(["\n          color: ",";\n          padding: 8px;\n        "]);return v=function(){return e},e}var h=function(){var e=Object(b.f)().palette;return Object(l.c)("div",null,Object(l.c)(d.a,{title:"Misc",className:""}),Object(l.c)("span",{css:Object(l.b)(v(),e.headerTextColor)},"Loading Spinner"),Object(l.c)(w.a,null))};function y(){var e=Object(a.a)(["\n  color: ",";\n  padding: 1rem;\n"]);return y=function(){return e},e}function k(){var e=Object(a.a)(["\n  color: ",";\n  font-size: 1.5rem;\n  font-weight: 500;\n  padding: 1rem;\n"]);return k=function(){return e},e}var O=c.a.h2(k(),(function(e){return e.theme.palette.text.primary})),j=c.a.p(y(),(function(e){return e.theme.palette.text.primary})),x=function(){return Object(l.c)("div",null,Object(l.c)(d.a,{title:"Typography",className:""}),Object(l.c)(O,null," Title "),Object(l.c)(j,null,"A paragraph that could span over multiple lines"))},_=[{title:"Colors",to:"/colors",exact:!0,component:function(){return Object(r.jsx)(g,{})},matches:[]},{title:"Typography",to:"/typography",component:function(){return Object(r.jsx)(x,{})},matches:[]},{title:"Misc",to:"/misc",component:function(){return Object(r.jsx)(h,{})},matches:[]}],I=n(6),S=n(83),F={xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400},E=Object.keys(F).reduce((function(e,t){return Object(S.a)(Object(S.a)({},e),{},Object(I.a)({},t,"@media (min-width: ".concat(F[t],"px)")))}),{}),A=n(85),C=(n(338),n(209),n(210),n(97)),N=n(47);function L(){var e=Object(a.a)(["\n  flex-grow: 1;\n"]);return L=function(){return e},e}function D(){var e=Object(a.a)(["\n  width: 25%;\n  "," {\n    width: 16.67%;\n  }\n"]);return D=function(){return e},e}function W(){var e=Object(a.a)(["\n  display: flex;\n"]);return W=function(){return e},e}Object(N.initSentry)(),window.Cypress&&(window.store=C.a);var T=c.a.div(W()),R=c.a.aside(D(),E["lg"]),P=c.a.article(L());t.default=function(){return Object(r.jsx)(A.a,{store:C.a,children:Object(r.jsxs)(s.a,{children:[Object(r.jsxs)(T,{children:[Object(r.jsx)(R,{children:Object(r.jsx)(u.a,{sidebarNavItems:_,menuVisible:!0,toggleSidebar:function(){}})}),Object(r.jsx)(P,{children:Object(r.jsx)(o.d,{children:_.map((function(e,t){return Object(r.jsx)(o.b,{path:e.to,exact:e.exact,children:Object(r.jsx)(e.component,{})},t)}))})})]}),Object(r.jsx)(o.a,{exact:!0,from:"/",to:_[0].to})]})})}},92:function(e,t,n){"use strict";var r=n(26),a=n(185);function s(e,t,n){c.log("window.onerror - ERROR",e,t,"line: ".concat(n))}function o(e){window.logs.push(e)}var c={log:function(){for(var e,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];if(window.logsEnabled){var s=Object(r.a)(arguments);(e=console).log.apply(e,Object(r.a)(s)),o(s)}},isEnabled:function(){return window.logsEnabled},enable:function(){var e={};for(var t in window.navigator)e[t]=window.navigator[t];window.logs=[],o(e),window.addEventListener("error",s),window.logsEnabled=!0},disable:function(){window.removeEventListener("error",s),window.logsEnabled=!1},setFormat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"json";window.logsFormat=e},exportLogs:function(){for(var e=window.logsFormat||"json",t=window.logs,n="[\n",r=0;r<t.length;++r){var s=t[r];n+=JSON.stringify(s)+"".concat(r<t.length-1?",":"","\n")}n+="]";var o="jina-dashboard-debug-output-".concat(new Date,".").concat(e),c=new Blob([n],{type:"text,plain;charset=utf-8"});Object(a.saveAs)(c,o)}};t.a=c},96:function(e,t,n){"use strict";n.d(t,"d",(function(){return b})),n.d(t,"c",(function(){return w})),n.d(t,"j",(function(){return h})),n.d(t,"g",(function(){return y})),n.d(t,"h",(function(){return k})),n.d(t,"i",(function(){return O})),n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return x})),n.d(t,"e",(function(){return _})),n.d(t,"f",(function(){return I}));var r=n(19),a=n.n(r),s=n(25),o=n(142),c=n(97),u=n(111),i=n(116),l=n.n(i),d=function(){var e=Object(s.a)(a.a.mark((function e(){var t,n,r,s,o,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.get("https://api.jina.ai/latest.json");case 2:return s=e.sent,o=s.data,c={flow:f(null===(t=o.methods.find((function(e){return"flow"===e.name})))||void 0===t?void 0:t.options),pea:f(null===(n=o.methods.find((function(e){return"pea"===e.name})))||void 0===n?void 0:n.options),pod:f(null===(r=o.methods.find((function(e){return"pod"===e.name})))||void 0===r?void 0:r.options),version:o.version},e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p={str:"string",bool:"boolean",int:"integer","typing.List[str]":"string"},f=function(e){return e?e.map((function(e){var t=e.name,n=e.help,r=e.default,a=e.type,s=p[a];return"undefined"===typeof r||null===r?{name:t,description:n,type:s}:{name:t,description:n,defaultValue:r,type:s}})):[]},m=n(100),g=n(92);function b(e,t){return function(n){n(v(e,t)),e?(n(y(t,"success")),n(function(){var e=Object(s.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:o.c}),e.next=3,u.a.getJinaFlowArguments();case 3:return n=e.sent,g.a.log("loadFlowArgumentsFromDaemon | flowArguments:",n),e.abrupt("return",t(Object(m.m)(n)));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())):n(function(){var e=Object(s.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:o.b}),e.next=3,d();case 3:return n=e.sent,g.a.log("loadFlowArgumentsFromApi | flowArguments:",n),e.abrupt("return",t(Object(m.m)(n)));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}function w(e,t){return function(n){n(v(e,t)),e&&n(y(t,"success"))}}function v(e,t){return{type:o.d,payload:{connected:e,message:t}}}function h(){return{type:o.l}}function y(e,t){return function(n){n(function(e,t){return{type:o.i,payload:{message:e,theme:t}}}(e,t)),setTimeout((function(){n({type:o.e})}),o.f)}}function k(e){return{type:o.j,payload:{message:e}}}function O(e,t){return{type:o.k,payload:{modal:e,modalParams:t||null}}}function j(){return{type:o.a}}function x(){return function(e){var t=c.a.getState().settingsState.settings;u.a.connect(t,(function(t){var n=t.connected,r=t.message;e(b(n,r))}))}}function _(){return{type:o.g}}function I(e){return localStorage.setItem("user",JSON.stringify(e)),{type:o.h,payload:{user:e}}}},97:function(e,t,n){"use strict";var r=n(179),a=n(83),s=n(9),o=n(105),c=n(128),u={example_workspace_pokedex:{jina_version:"latest",type:"example",name:"Pokedex Workspace",selectedFlowId:"example_flow_pokedex",flowArguments:c.s,isConnected:!1,daemon_endpoint:null,daemon_id:null,files:[]},example_workspace_flower:{jina_version:"latest",type:"example",name:"Flower Workspace",selectedFlowId:"example_flow_flower",flowArguments:c.s,isConnected:!1,daemon_endpoint:null,daemon_id:null,files:[]},example_workspace_southpark:{jina_version:"latest",type:"example",name:"Southpark Workspace",selectedFlowId:"example_flow_southpark",flowArguments:c.s,isConnected:!1,daemon_endpoint:null,daemon_id:null,files:[]},example_workspace_test:{jina_version:"latest",type:"example",name:"Example Workspace",selectedFlowId:"blankFlow",flowArguments:c.s,isConnected:!1,daemon_endpoint:null,daemon_id:null,files:[]}},i={example_flow_pokedex:{workspaceId:"example_workspace_pokedex",name:"Pokedex Query",yaml:"!Flow\n      with:\n        read_only: true\n        rest_api: true\n        port_expose: $JINA_PORT\n        board:\n          canvas:\n            gateway:\n              x: 250\n              y: 150\n            chunk_seg:\n              x: 250\n              y: 268\n            tf_encode:\n              x: 250\n              y: 420\n            chunk_idx:\n              x: 250\n              y: 600\n            ranker:\n              x: 250\n              y: 836\n            doc_idx:\n              x: 249\n              y: 985\n      pods:\n        gateway: {}\n        chunk_seg:\n          uses: pods/craft.yml\n          parallel: $PARALLEL\n          needs: gateway\n        tf_encode:\n          uses: pods/encode.yml\n          parallel: $PARALLEL\n          timeout_ready: 600000\n          needs: chunk_seg\n        chunk_idx:\n          uses: pods/chunk.yml\n          separated_workspace: true\n          polling: all\n          uses_reducing: _merge_all\n          timeout_ready: 100000\n          needs: tf_encode\n        ranker:\n          uses: BiMatchRanker\n          needs: chunk_idx\n        doc_idx:\n          uses: pods/doc.yml\n          needs: ranker\n      \n      "},example_flow_flower:{workspaceId:"example_workspace_flower",name:"Flower Query",yaml:"!Flow\n  with:\n    read_only: true\n    port_expose: $JINA_PORT\n    board:\n      canvas:\n        gateway:\n          x: 250\n          y: 150\n        loader:\n          x: 250\n          y: 257\n        flipper:\n          x: 252\n          y: 407\n        normalizer:\n          x: 239\n          y: 563\n        encoder:\n          x: 252\n          y: 712\n        chunk_indexer:\n          x: 250\n          y: 872\n        ranker:\n          x: 252\n          y: 1066\n        doc_indexer:\n          x: 253\n          y: 1199\n  pods:\n    gateway: {}\n    loader:\n      uses: yaml/craft-load.yml\n      read_only: true\n      needs: gateway\n    flipper:\n      uses: yaml/craft-flip.yml\n      read_only: true\n      needs: loader\n    normalizer:\n      uses: yaml/craft-normalize.yml\n      read_only: true\n      needs: flipper\n    encoder:\n      uses: $ENCODER\n      timeout_ready: 600000\n      read_only: true\n      needs: normalizer\n    chunk_indexer:\n      uses: yaml/index-chunk.yml\n      separated_workspace: true\n      polling: all\n      uses_reducing: _merge_all\n      needs: encoder\n    ranker:\n      uses: MinRanker\n      needs: chunk_indexer\n    doc_indexer:\n      uses: yaml/index-doc.yml\n      needs: ranker  \n  "},example_flow_southpark:{workspaceId:"example_workspace_southpark",name:"Southpark Query",yaml:"!Flow\nwith:\n  read_only: true\n  port_expose: $JINA_PORT\n  board:\n    canvas:\n      gateway:\n        x: 254\n        y: 147\n      splittor:\n        x: 254\n        y: 270\n      encoder:\n        x: 254\n        y: 448\n      chunk_indexer:\n        x: 251\n        y: 645\n      ranker:\n        x: 255\n        y: 862\n      doc_indexer:\n        x: 256\n        y: 1002\npods:\n  gateway: {}\n  splittor:\n    uses: pods/craft-split.yml\n    parallel: $PARALLEL\n    read_only: true\n    needs: gateway\n  encoder:\n    uses: pods/encode.yml\n    parallel: $PARALLEL\n    timeout_ready: 60000\n    read_only: true\n    needs: splittor\n  chunk_indexer:\n    uses: pods/index-chunk.yml\n    separated_workspace: true\n    polling: all\n    reducing_uses: _merge_all\n    needs: encoder\n  ranker:\n    uses: MinRanker\n    needs: chunk_indexer\n  doc_indexer:\n    uses: pods/index-doc.yml\n    needs: ranker\n"},blankFlow:{name:"Test Flow",workspaceId:"example_workspace_test",yaml:"!Flow\n    with:\n      rest_api: true\n      port_expose: 5555\n    pods:\n      pod1:\n        read_only: true\n      pod2:\n        read_only: true\n      pod3:\n        read_only: true"}},l=n(103),d=n(29),p=n(106);var f=n(110);function m(){var e=localStorage.getItem("userFlows"),t=e?JSON.parse(e):null;return Object(o.isEmpty)(t)?c.r:t}function g(){var e={};return Object.entries(i).forEach((function(t){var n=Object(s.a)(t,2),r=n[0],o=n[1],c=Object(l.f)(o.yaml);if(null===c||void 0===c?void 0:c.data){var u=Object(l.d)(c.data);e[r]=Object(a.a)(Object(a.a)({},o),{},{workspaceId:o.workspaceId,type:"user-generated",isConnected:!1,flowChart:u})}})),e}function b(){return u}var w={selectedWorkspaceId:"_userWorkspace",workspaces:Object(a.a)(Object(a.a)({},b()),function(){var e=localStorage.getItem("userWorkspaces"),t=e?JSON.parse(e):null;return Object(o.isEmpty)(t)?{_userWorkspace:{name:"Workspace 1",type:"user-generated",daemon_endpoint:"",isConnected:!1,workspace_id:"",files:[],selectedFlowId:c.v,flows:Object(a.a)({},m()),flowArguments:c.s}}:t}()),flows:Object(a.a)(Object(a.a)({},g()),m())};function v(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object(d.a)(),r=arguments.length>3?arguments[3]:void 0,a="Custom Flow",s=Object.values(e.flows).filter((function(e){return e.name.startsWith(a)})),o=s.map((function(e){return parseInt(e.name.substring(a.length))||0})).sort((function(e,t){return e-t})),u=o[o.length-1]||0,i=c.x;if(t){var p=Object(l.f)(t);(null===p||void 0===p?void 0:p.data)&&(i=Object(l.d)(p.data))}return e.flows[n]={isConnected:!1,name:"".concat(a," ").concat(u+1),type:"user-generated",workspaceId:r||e.selectedWorkspaceId,flowChart:i},e}var h=Object(p.a)((function(e,t){switch(console.log("REDUCER ACTION: ",t),t.type){case c.c:e=v(e);break;case c.i:case c.j:e=v(e,t.payload);break;case c.e:var n=t.payload;console.log("delete flowId: ",n),console.log("flows before: ",JSON.parse(JSON.stringify(e.flows))),e.flows=Object(o.omit)(e.flows,n),console.log("flows after: ",JSON.parse(JSON.stringify(e.flows)));var r=e.selectedWorkspaceId;console.log("workspace: ",r);var u=e.workspaces[r].selectedFlowId,i=Object.entries(e.flows).filter((function(e){var t=Object(s.a)(e,2);t[0];return t[1].workspaceId===r}));if(console.log("workspaceFlows:",JSON.parse(JSON.stringify(i))),u===n&&i.length){var l=i[0][0];e.workspaces[r].selectedFlowId=l,console.log("firstFlowId:",l)}else if(!i.length){var p=Object(d.a)();v(e,void 0,p),e.workspaces[r].selectedFlowId=p}console.log("new draft: ",JSON.parse(JSON.stringify(e)));break;case c.p:var m=t.payload;if(e.workspaces[e.selectedWorkspaceId].selectedFlowId){var w=e.flows[e.workspaces[e.selectedWorkspaceId].selectedFlowId];e.flows[e.workspaces[e.selectedWorkspaceId].selectedFlowId]=Object(a.a)(Object(a.a)({},w),m)}break;case c.m:e.workspaces[e.selectedWorkspaceId].flowArguments=t.payload;break;case c.k:e.workspaces[e.selectedWorkspaceId].selectedFlowId=t.payload;break;case c.n:var h=t.payload,y=h.nodeUpdate,k=h.nodeId,O=e.workspaces[e.selectedWorkspaceId].selectedFlowId,j=e.flows[O].flowChart.elements.findIndex((function(e){return e.id===k}));if(j>=0){var x=e.flows[O].flowChart.elements[j],_=Object(a.a)(Object(a.a)({},x),y);e.flows[O].flowChart.elements[j]=_}break;case c.o:var I=t.payload,S=I.nodeDataUpdate,F=I.nodeId,E=e.workspaces[e.selectedWorkspaceId].selectedFlowId,A=e.flows[E].flowChart.elements.findIndex((function(e){return e.id===F}));if(A>=0){var C=e.flows[E].flowChart.elements[A],N=Object(a.a)(Object(a.a)({},C.data),S);e.flows[E].flowChart.elements[A].data=N}break;case c.b:var L=t.payload,D=L.data,W=L.id,T=L.position,R=Object(f.b)(W,D,T);e.flows[e.workspaces[e.selectedWorkspaceId].selectedFlowId].flowChart.elements.push(R);break;case c.g:var P=t.payload,M=e.flows[e.workspaces[e.selectedWorkspaceId].selectedFlowId].flowChart.elements.filter((function(e){return Object(f.e)(e)?e.id!==P:!Object(f.d)(e)||e.source!==P&&e.target!==P}));e.flows[e.workspaces[e.selectedWorkspaceId].selectedFlowId].flowChart.elements=M;break;case c.a:var U=t.payload,J=U.source,H=U.target,B=Object(f.a)(J,H);e.flows[e.workspaces[e.selectedWorkspaceId].selectedFlowId].flowChart.elements.push(B);break;case c.f:if(void 0!==t.payload.source){var G=t.payload,q=G.source,z=G.target;e.flows[e.workspaces[e.selectedWorkspaceId].selectedFlowId].flowChart.elements=e.flows[e.workspaces[e.selectedWorkspaceId].selectedFlowId].flowChart.elements.filter((function(e){return!(Object(f.d)(e)&&(e.source===q||e.target===z))}))}else{var K=t.payload;e.flows[e.workspaces[e.selectedWorkspaceId].selectedFlowId].flowChart.elements=e.flows[e.workspaces[e.selectedWorkspaceId].selectedFlowId].flowChart.elements.filter((function(e){return K!==e.id}))}break;case c.l:e.selectedWorkspaceId=t.payload;break;case c.d:e=function(e){var t="Workspace",n=Object.values(e.workspaces).filter((function(e){return e.name.startsWith(t)})).map((function(e){return parseInt(e.name.substring(t.length))||0})).sort((function(e,t){return e-t})),r=n[n.length-1]||0,a=Object(d.a)(),s=Object(d.a)();return e.workspaces[a]={jina_version:c.u,flowArguments:c.s,selectedFlowId:s,name:"".concat(t," ").concat(r+1),type:"user-generated",daemon_endpoint:"",isConnected:!1,daemon_id:null,files:[]},e=v(e,void 0,s,a)}(e);break;case c.q:var $=t.payload;if(e.selectedWorkspaceId){var V=e.workspaces[e.selectedWorkspaceId];e.workspaces[e.selectedWorkspaceId]=Object(a.a)(Object(a.a)({},V),$)}break;case c.h:var Q=t.payload;e.workspaces=Object(o.omit)(e.workspaces,Q),e.flows=Object(o.pickBy)(e.flows,(function(e){return e.workspaceId!==Q}));var Y=Object.entries(e.workspaces).filter((function(e){var t=Object(s.a)(e,2);t[0];return"example"!==t[1].type}));if(e.selectedWorkspaceId===Q&&Y.length){var X=Y[0][0];e.selectedWorkspaceId=X}else Y.length||(e.workspaces=Object(a.a)(Object(a.a)({},Object(o.cloneDeep)(c.w)),b()),e.flows=Object(a.a)(Object(a.a)({},Object(o.cloneDeep)(c.t)),g()),e.selectedWorkspaceId=Object.keys(e.workspaces)[0])}!function(e){var t={};Object.entries(e.flows).forEach((function(e){var n=Object(s.a)(e,2),r=n[0],a=n[1];"user-generated"===a.type&&(t[r]=a)})),localStorage.setItem("userFlows",JSON.stringify(t))}(e),function(e){var t={},n=e.workspaces;Object.entries(n).forEach((function(e){var n=Object(s.a)(e,2),r=n[0],a=n[1];"user-generated"===a.type&&(t[r]=a)})),localStorage.setItem("userWorkspaces",JSON.stringify(t))}(e)}),w),y=n(138),k=Object(p.a)((function(e,t){switch(t.type){case y.b:e.loading=!0;break;case y.d:e.loading=!1,e.images=t.payload.images,e.error=null;break;case y.c:e.images=[],e.loading=!1,e.error=t.payload.error;break;case y.e:e.selectedFilters=Object(o.xor)(e.selectedFilters,[t.payload.filter]);break;case y.a:e.selectedFilters=e.selectedFilters.filter((function(e){return!t.payload.filters.includes(e)}))}}),y.f),O=n(262),j=n(148),x=n(92);var _=Object(p.a)((function(e,t){switch(t.type){case j.a:e.settings=Object(a.a)(Object(a.a)({},e.settings),t.payload),x.a.log("saveSettings - settings",e.settings),n=e.settings,Object.keys(n).forEach((function(e){localStorage.setItem("preferences-".concat(e),n[e])}))}var n}),j.b),I=n(115),S=Object(p.a)((function(e,t){switch(t.type){case I.b:e.logIndex=t.payload;break;case I.a:!function(){var n=t.payload;x.a.log("_handleNewLog");var r=Object(l.j)(n,e.logs.length),s=r.name,o=r.level,c=r.unixTime;e.logs.push(r);var u=e.logSources[s]?e.logSources[s]+1:1;e.logSources[s]=u;var i=e.logLevels[o]?e.logLevels[o]+1:1;e.logLevels[o]=i;var d=e.logLevelOccurrences[c]?Object(a.a)({},e.logLevelOccurrences[c]):Object(I.c)();e.logLevelOccurrences[c]=d,e.logLevelOccurrences[c].levels[o]++,e.logLevelOccurrences[c].lastLog=r.idx}()}}),I.d),F=n(142),E=Object(p.a)((function(e,t){switch(t.type){case F.d:x.a.log("handleLogConnectionStatus - status",t.payload.connected),x.a.log("handleLogConnectionStatus - message",t.payload.message),e.loading=!1,e.connected=t.payload.connected;break;case F.l:e.menuVisible=!e.menuVisible;break;case F.i:e.banners.push({message:t.payload.message,theme:t.payload.theme});break;case F.e:e.banners.shift();break;case F.j:e.banners.push({message:t.payload.message,theme:"error"});break;case F.k:e.modal=t.payload.modal,e.modalParams=t.payload.modalParams;break;case F.a:e.modal=null,e.modalParams=null;break;case I.a:e.processes[t.payload.process]=t.payload.name;break;case F.h:e.user=t.payload.user;break;case F.g:e.user=null,localStorage.removeItem("user")}}),Object(F.m)()),A=n(263),C=n(96),N={taskData:{qps:{current:"0",history:new Array(30).fill(0)},elapsed:{task_name:"No Current Task",seconds:"0s"},progress:{currentRequest:0,bar_len:0,num_bars:0},speed:{current:"0",unit:"units",history:new Array(30).fill(0)},lastUpdateChart:new Date,messages:[],bytes:[]}},L=Object(p.a)((function(e,t){switch(t.type){case"HANDLE_TASK":return function(){var n=t.payload,r=n.taskEvent,s=n.processes,o=Object(a.a)({},r),c=o.task_name,u=o.process,i=o.bar_len,d=o.num_bars,p=o.elapsed,f=o.speed,m=o.speed_unit,g=o.bytes_recv,b=o.bytes_sent,w=o.msg_recv,v=o.msg_sent,h=o.num_reqs,y=o.qps;i&&d&&(e.taskData.progress.currentRequest=h,e.taskData.progress.bar_len=i,e.taskData.progress.num_bars=d);if(w&&v){var k=e.taskData.messages.map((function(e){return e.process})).indexOf(u),O={process:u,sent:v,received:w,node:s[u]},j={process:u,sent:b,received:g,node:s[u]};k<0?(e.taskData.messages.push(O),e.taskData.bytes.push(j)):(e.taskData.messages[k]=O,e.taskData.bytes[k]=j),e.taskData.messages=e.taskData.messages.sort((function(e,t){return t.sent+t.received-(e.sent+e.received)})).slice(0,20),e.taskData.bytes=e.taskData.bytes.sort((function(e,t){return t.sent+t.received-(e.sent+e.received)})).slice(0,20)}e.taskData.lastUpdateChart=new Date,y&&(e.taskData.qps.current=parseFloat(y).toFixed(1),e.taskData.qps.history.push(parseFloat(y).toFixed(3)),e.taskData.qps.history.shift());f&&m&&(e.taskData.speed.unit=m,e.taskData.speed.current=parseFloat(f).toFixed(1),e.taskData.speed.history.push(parseFloat(f).toFixed(3)),e.taskData.speed.history.shift());p&&(e.taskData.elapsed.seconds=Object(l.e)(parseInt(p)),e.taskData.elapsed.task_name="Task: ".concat(c))}()}}),N),D=n(111),W=Object(r.combineReducers)({flowState:h,hubState:k,settingsState:_,logStreamState:S,globalState:E,taskState:L}),T=Object(r.createStore)(W,Object(O.composeWithDevTools)(Object(r.applyMiddleware)(A.a)));D.a.connect(T.getState().settingsState.settings,(function(e){var t=e.connected,n=e.message;T.dispatch(Object(C.d)(t,n))}));t.a=T},98:function(e,t,n){"use strict";n.d(t,"f",(function(){return d})),n.d(t,"b",(function(){return p})),n.d(t,"d",(function(){return f})),n.d(t,"c",(function(){return m})),n.d(t,"e",(function(){return g})),n.d(t,"a",(function(){return b}));var r=n(83),a=n(9),s=n(259),o=n(115),c=n(105),u=Object(r.a)(Object(r.a)({},{depth:0}),{label:"string",name:"string"}),i=n(110),l=Object.keys(u),d=function(e){var t=/^!/.test(e)?e.split("\n").slice(1).join("\n"):e;try{var n=s.parse(t);if("object"!==typeof n||null===n)throw new Error("Invalid YAML");return Object.keys(n.pods).forEach((function(e){n.pods[e].needs&&!Array.isArray(n.pods[e].needs)&&(n.pods[e].needs=[n.pods[e].needs])})),{data:n}}catch(r){alert("Error Parsing YAML:\n"+r.message)}},p=function(e,t){var n=e.with,o=e.elements,c=[],u=[];o.forEach((function(e){Object(i.d)(e)&&u.push(e),Object(i.e)(e)&&c.push(e)}));var d=t.pod,p=u.reduce((function(e,t){var n=t.source,r=t.target;return e[r]||(e[r]=[]),e[r].push(n),e}),{}),f=c.filter((function(e){return"gateway"!==e.data.label})).reduce((function(e,t){var n,s=t.data.label,o=Object.entries(t.data).reduce((function(e,t){var n=Object(a.a)(t,2),r=n[0],s=n[1];return l.includes(r)||(e[r]=function(e,t,n){var r=n.find((function(t){return t.name===e}));return r&&"boolean"===r.type?"true"===String(t):t}(r,s,d)),e}),{});return p[s]&&(o.needs=(n=p[s],Array.isArray(n)&&1===n.length?n[0]:n)),e[s]=Object(r.a)({},o),e}),{}),m=c.reduce((function(e,t){var n=t.position,r=n.x,a=n.y;return e[t.data.label||t.data.name]={x:parseInt(r),y:parseInt(a)},e}),{}),g={with:Object(r.a)(Object(r.a)({},n),{},{board:{canvas:m}}),pods:f};return"!Flow\n".concat(s.stringify(g))},f=function(e){var t=60,n=3600;return e<t?"".concat(Math.floor(e),"s"):e<n?"".concat(Math.floor(e/t),"m ").concat(Math.floor(e%t),"s"):"".concat(Math.floor(e/n),"h ").concat(Math.floor(e%n/t),"m ").concat(Math.floor(e%t),"s")},m=function(e){return e<1024?"".concat(e," Bytes"):e<Math.pow(1024,2)?"".concat((e/1024).toFixed(1)," KB"):e<Math.pow(1024,3)?"".concat((e/Math.pow(1024,2)).toFixed(1)," MB"):"".concat((e/Math.pow(1024,3)).toFixed(1)," GB")};function g(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:60,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=Object(o.c)(),s=e/t,u=[],i=Math.ceil(r/1e3/s)*s,l=Math.floor(r/1e3),d=function(e){for(var t=Object(c.cloneDeep)(a),r=e;r<e+s;++r){var o=n[r];o&&(t.lastLog=o.lastLog,Object.entries(o.levels).forEach((function(e){var n=e[0],r=e[1];t.levels[n]=t.levels[n]+r})))}u.push(t)},p=i-e;p<i;p+=s)d(p);return{data:u,numSeconds:e,numTicks:t,lastTimestamp:l}}function b(e){return e.charAt(0).toUpperCase()+e.slice(1)}}}]);